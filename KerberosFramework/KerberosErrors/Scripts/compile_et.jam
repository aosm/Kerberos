# compile_et <file>.h <file>.c <file>.strings : <file>.et
# Runs compile_et to create error table code and XML from .et files
COMPILE_ET = "$(SRCROOT)/../../KerberosErrors/Scripts/compile_et" ;

rule compile_et
{
    DEPENDS "$(1)"    : "$(2)" ;
    DEPENDS "$(1)"    : "$(COMPILE_ET)" ;
    Clean.Remove clean : "$(1)" ;
}

actions compile_et
{
    mkdir -p "$(1[1]:D)" "$(1[2]:D)" "$(1[3]:D)"
    perl "$(COMPILE_ET)" --etout "$(1[1]:D)" --stringsout "$(1[3]:D)" "$(2[1])"
}
